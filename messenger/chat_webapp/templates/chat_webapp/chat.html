{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Чат</title>
</head>
<body>

<h1>Чат</h1>
<p>Привет, {{ user }}!</p>

<h2>Сообщения</h2>
<ul>
    {% for msg in messages %}
        <li>
            {% if msg.user == user %}
                <strong>Вы:</strong> {{ msg.text }}

                <!-- Редактировать -->
                <form method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit"
                            name="edit_message_id"
                            value="{{ msg.id }}">
                        Редактировать
                    </button>
                </form>

                <!-- Удалить -->
                <form method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit"
                            name="delete_message"
                            value="{{ msg.id }}">
                        Удалить
                    </button>
                </form>

            {% else %}
                <strong>{{ msg.user.username }}:</strong>
                {{ msg.content }}
            {% endif %}
        </li>
    {% empty %}
        <li>Сообщений пока нет.</li>
    {% endfor %}
</ul>

<h2>Новое сообщение</h2>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Отправить</button>
</form>

</body>
</html>